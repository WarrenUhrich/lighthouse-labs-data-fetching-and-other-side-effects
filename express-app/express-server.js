//////////////////////////////////////////////////////////////////
// Imports
//////////////////////////////////////////////////////////////////

const express = require('express');
const morgan = require('morgan');
const cors = require('cors');

//////////////////////////////////////////////////////////////////
// "Database"
//////////////////////////////////////////////////////////////////

const locations = [
    'Calgary',   // 0
    'Vancouver', // 1
    'Edmonton'   // 2
];

const students = [
    {name: 'John',      city: 0, favourite: 'React'},
    {name: 'Jaqueline', city: 1, favourite: 'JS'},
    {name: 'Warren',    city: 2, favourite: 'PHP'},
    {name: 'Nanaya',    city: 1, favourite: 'JS'},
];

//////////////////////////////////////////////////////////////////
// Initialization
//////////////////////////////////////////////////////////////////

const app = express();
const PORT = 8080;

//////////////////////////////////////////////////////////////////
// Middleware
//////////////////////////////////////////////////////////////////

app.use(morgan('dev'));
app.use(cors()); // https://www.npmjs.com/package/cors

//////////////////////////////////////////////////////////////////
// Listener
//////////////////////////////////////////////////////////////////

app.listen(PORT, () => console.log(
    'Express app listening on port:', PORT
));

//////////////////////////////////////////////////////////////////
// Routes
//////////////////////////////////////////////////////////////////

/**
 * Homepage / status response.
 */
app.get('/', (req, res) => {
    res.status(200).json({message: '200 OK!'});
});

/**
 * Locations API End-point
 */
app.get('/api/locations', (req, res) => {
    res.status(200).json(locations);
});

/**
 * Students API End-point
 */
app.get('/api/students', (req, res) => {
    res.status(200).json(students);
});
